<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<p>progress bar</p>
<script>
var array=[];
function startTime() {
  array.push(1);
  var today = new Date();
  var s = today.getSeconds()%5+1;
  //document.getElementById('txt').innerHTML =s;
  var elem = document.getElementById("myBar");  
  var width = 0;		
  var id = setInterval(frame, 20);
  document.getElementById('txt').innerHTML =s+array;
  if(s==5){
     array=[];
  }
  function frame() {
    if (width > 20) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width+(s-1)*20 + '%'; 
	}
  }
  var t = setTimeout(startTime, 1000);


}
function showCoords(event) {
	  var x = event.clientX;
	  var y = event.clientY;
	  var coor = "X coords: " + x + ", Y coords: " + y;
	  document.getElementById("demo").innerHTML = coor;
	}

  // returns a keyboard symbol based on its coordinates on the keyboard
    function getLetter(x, y){
      if (x > 175 && x < 340 && y > 245 && y < 285){
        return 'a';
      } else if (x > 175 && x < 340 && y > 515 && y < 555){
        return 'b';
      } else if(x > 5 && x < 170 && y > 245 && y < 285){
        return 'c';
      } else if (x > 5 && x < 105 && y > 290 && y < 330){
        return 'd';
      } else if(x > 5 && x < 105 && y > 335 && y < 375){
        return 'e';
      } else if (x > 5 && x < 105 && y > 380 && y < 420){
        return 'f';
      } else if(x > 5 && x < 105 && y > 425 && y < 465){
        return 'g';
      } else if (x > 5 && x < 105 && y > 470 && y < 510){
        return 'h';
      } else if(x > 5 && x < 170 && y > 515 && y < 555){
        return 'i';
      } else if (x > 345 && x < 510 && y > 515 && y < 555){
        return 'j';
      } else if(x > 515 && x < 680 && y > 515 && y < 555){
        return 'k';
      } else if (x > 685 && x < 850 && y > 515 && y < 555){
        return 'l';
      } else if(x > 855 && x < 1020 && y > 515 && y < 555){
        return 'm';
      } else if (x > 1085 && x < 1190 && y > 515 && y < 555){
        return 'n';
      } else if(x > 1195 && x < 1360 && y > 515 && y < 555){
        return 'o';
      } else if (x > 1260 && x < 1360 && y > 470 && y < 510){
        return 'p';
      } else if(x > 1260 && x < 1360 && y > 425 && y < 465){
        return 'q';
      } else if (x > 1260 && x < 1360 && y > 380 && y < 420){
        return 'r';
      } else if(x > 1260 && x < 1360 && y > 335 && y < 375){
        return 's';
      } else if (x > 1260 && x < 1360 && y > 290 && y < 330){
        return 't';
      } else if(x > 1195 && x < 1360 && y > 245 && y < 285){
        return 'u';
      } else if (x > 1085 && x < 1190 && y > 245 && y < 285){
        return 'v';
      } else if(x > 855 && x < 1020 && y > 245 && y < 285){
        return 'w';
      } else if (x > 685 && x < 850 && y > 245 && y < 285){
        return 'x';
      } else if(x > 515 && x < 680 && y > 245 && y < 285){
        return 'y';
      } else if (x > 345 && x < 510 && y > 245 && y < 285){
        return 'z';
      } else if(x > 215 && x < 315 && y > 335 && y < 375){
        return '?';
      } else if (x > 425 && x < 525 && y > 335 && y < 375){
        return '!';
      } else if(x > 635 && x < 735 && y > 425 && y < 465){
        return ' ';
      } else if (x > 635 && x < 735 && y > 335 && y < 375){
        return '.';
      } else if(x > 840 && x < 940 && y > 335 && y < 375){
        return ',';
      } else if(x > 1050 && x < 1150 && y > 335 && y < 375){
        return '\b';
      }
    }

function doWebGazer()
{
    //counter(5);
    //sendAlert();
    //Begins the webgazer API
    webgazer.begin();
    //Makes the canvas
    var canvas = document.getElementById("screenCanvas");
    var ctx = canvas.getContext("2d");
    ctx.fillStyle = "#FF0000";
    webgazer.setGazeListener(function(data, elapsedTime) 
    {
        if (data == null) {
            return;
        }
        var xprediction = data.x; //these x coordinates are relative to the viewport
        var yprediction = data.y; //these y coordinates are relative to the viewport
        var prediction = webgazer.getCurrentPrediction();
            if (prediction)
            {
                var checkx = prediction.x;
                var checky = prediction.y;
                ctx.fillStyle = "#FF0000";
                ctx.fillRect(checkx, checky, 20, 20);
                var oldcheckx = checkx;
                var oldchecky = checky;
                if (elapsedTime%3>2)
                {
                    ctx.clearRect(0, 0, 1356, 638);
                }
            }
    }).begin();
}

</script>
</head>


<body onload="startTime(); doWebGazer()";>


<div id="txt"></div>
<div class="w3-container">
  <div class="w3-light-grey">
    <div id="myBar" class="w3-green" style="height:20px;width:0"></div>
  </div>
  <br>

</div>

    <script src="webgazer.js" type="text/javascript" ></script>
    <script src="drawEyeCursor.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <input class="input" placeholder="Tap on the virtual keyboard to start" />
    <div class="simple-keyboard"></div>
  
    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.min.js"></script>
    <script src="src/index.js"></script>
    <canvas id="screenCanvas" width=1356 height=638 style="border:1px solid #000000;"></canvas>
    <script>
        let Keyboard = window.SimpleKeyboard.default;
        let myKeyboard = new Keyboard({
        onChange: input => onChange(input),
        onKeyPress: button => onKeyPress(button),
        layout: {
            default: ["c a z y x w v u", "d t", "e ? ! . , {bksp} s", "f r", "g {space} q", "h p", "i b j k l m n o"]
        },
        display: {
            '{space}': 'space',
            '{bksp}': 'backspace'
        },
        });
        function onChange(input) {
        document.querySelector(".input").value = input;
        console.log("Input changed", input);
        }
        function onKeyPress(button) {
        console.log("Button pressed", button);
        }
    </script>

</body>
</html>
