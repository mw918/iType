<head>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<p>progress bar</p>
<script>
var array=[];
function startTime() {
  array.push(1);
  var today = new Date();
  var s = today.getSeconds()%5+1;
  //document.getElementById('txt').innerHTML =s;
  var elem = document.getElementById("myBar");  
  var width = 0;		
  var id = setInterval(frame, 20);
  document.getElementById('txt').innerHTML =s+array;
  if(s==5){
     array=[];
  }
  function frame() {
    if (width > 20) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width+(s-1)*20 + '%'; 
	}
  }
  var t = setTimeout(startTime, 1000);


}
function showCoords(event) {
	  var x = event.clientX;
	  var y = event.clientY;
	  var coor = "X coords: " + x + ", Y coords: " + y;
	  document.getElementById("demo").innerHTML = coor;
	}
</script>
</head>


<body onmousemove = "showCoords(event)" onload="startTime()">


<div id="txt"></div>
<div class="w3-container">
  <div class="w3-light-grey">
    <div id="myBar" class="w3-green" style="height:20px;width:0"></div>
  </div>
  <br>

</div>

<script>

<body><!-- Chris-->
    <script src="webgazer.js" type="text/javascript" ></script>
    <script src="drawEyeCursor.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <!--
    <script src="allFunctions.js" type="text/javascript"></script>
    <script src="testing.js" type="text/javascript"></script>
    -->
    <input class="input" placeholder="Tap on the virtual keyboard to start" />
    <div class="simple-keyboard"></div>
  
    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.min.js"></script>
    <script src="src/index.js"></script>
    <canvas id="screenCanvas" width=1356 height=638 style="border:1px solid #000000;"></canvas>
    <script>
        let Keyboard = window.SimpleKeyboard.default;

        let myKeyboard = new Keyboard({
        onChange: input => onChange(input),
        onKeyPress: button => onKeyPress(button),
        layout: {
            default: ["c a z y x w v u", "d t", "e ? ! . , {bksp} s", "f r", "g {space} q", "h p", "i b j k l m n o"]
        },
        display: {
            '{space}': 'space',
            '{bksp}': 'backspace'
        },
        });

        function onChange(input) {
        document.querySelector(".input").value = input;
        console.log("Input changed", input);
        }

        function onKeyPress(button) {
        console.log("Button pressed", button);
        }
    </script>
    <script type="text/javascript">
        //counter(5);
        //sendAlert();
        //Begins the webgazer API
        webgazer.begin();
        //Makes the canvas
        var canvas = document.getElementById("screenCanvas");
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "#FF0000";
        webgazer.setGazeListener(function(data, elapsedTime) 
        {
            if (data == null) {
                return;
            }
            var xprediction = data.x; //these x coordinates are relative to the viewport
            var yprediction = data.y; //these y coordinates are relative to the viewport
            var prediction = webgazer.getCurrentPrediction();
                if (prediction)
                {
                    var checkx = prediction.x;
                    var checky = prediction.y;
                    ctx.fillStyle = "#FF0000";
                    ctx.fillRect(checkx, checky, 20, 20);
                    var oldcheckx = checkx;
                    var oldchecky = checky;
                    if (elapsedTime%3>2)
                    {
                        ctx.clearRect(0, 0, 1356, 638);
                    }
                }
        }).begin();
    </script>
</body>
